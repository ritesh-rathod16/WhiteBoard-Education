<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhiteBoard Pro</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .sidebar {
            width: 250px;
            background-color: #34495e;
            color: white;
            padding: 15px;
            overflow-y: auto;
        }
        
        .whiteboard-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background-color: #ecf0f1;
        }
        
        .toolbar {
            background-color: #3498db;
            padding: 10px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .tool-btn {
            background-color: #2980b9;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .tool-btn:hover {
            background-color: #1a6ea0;
        }
        
        .tool-btn.active {
            background-color: #16a085;
        }
        
        .whiteboard {
            flex: 1;
            background-color: white;
            position: relative;
            overflow: hidden;
            cursor: crosshair;
        }
        
        .participants {
            margin-top: 20px;
        }
        
        .participant {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .participant-video {
            width: 100%;
            background-color: #2c3e50;
            aspect-ratio: 16/9;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .footer {
            background-color: #2c3e50;
            color: white;
            padding: 10px;
            text-align: center;
        }
        
        .color-picker {
            display: flex;
            gap: 5px;
            align-items: center;
        }
        
        .color-option {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .color-option.selected {
            border-color: white;
        }
        
        .sticky-note {
            position: absolute;
            min-width: 150px;
            min-height: 100px;
            background-color: #f9f3a1;
            padding: 10px;
            resize: both;
            overflow: hidden;
            cursor: move;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .sticky-note textarea {
            width: 100%;
            height: 100%;
            border: none;
            background: transparent;
            resize: none;
            outline: none;
            font-family: inherit;
        }
        
        .draggable-image {
            position: absolute;
            cursor: move;
            resize: both;
            overflow: hidden;
        }
        
        .draggable-image img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        .resize-handle {
            width: 10px;
            height: 10px;
            background-color: #3498db;
            position: absolute;
            right: 0;
            bottom: 0;
            cursor: nwse-resize;
        }
        
        .video-controls {
            display: flex;
            gap: 10px;
            padding: 10px;
            background-color: #2c3e50;
            justify-content: center;
        }
        
        .emoji-picker {
            position: absolute;
            background: white;
            border: 1px solid #ccc;
            padding: 10px;
            z-index: 1000;
            display: none;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>WhiteBoard Pro</h1>
        <div id="user-name">User-Z4m</div>
    </div>
    
    <div class="main-container">
        <div class="sidebar">
            <h2>Participants</h2>
            <div class="participant">
                <strong>Mile</strong>
                <div class="participant-actions">
                    <button class="tool-btn">Video</button>
                    <button class="tool-btn">Share</button>
                    <button class="tool-btn">Record</button>
                </div>
            </div>
            
            <div class="participant-video" id="local-video">
                User-Z4m's video
            </div>
            
            <div class="participant-video" id="remote-video">
                Other participant's video
            </div>
            
            <div class="participants" id="participants-list">
                <!-- Participants will be added here -->
            </div>
        </div>
        
        <div class="whiteboard-container">
            <div class="toolbar">
                <button class="tool-btn" data-tool="select">Select</button>
                <button class="tool-btn" data-tool="pen">Pen</button>
                <button class="tool-btn" data-tool="eraser">Eraser</button>
                <button class="tool-btn" data-tool="text">Text</button>
                <button class="tool-btn" data-tool="sticky-note">Sticky Note</button>
                <button class="tool-btn" data-tool="shape">Shape</button>
                <button class="tool-btn" data-tool="line">Line</button>
                
                <div class="color-picker">
                    <div class="color-option selected" style="background-color: #000000;" data-color="#000000"></div>
                    <div class="color-option" style="background-color: #e74c3c;" data-color="#e74c3c"></div>
                    <div class="color-option" style="background-color: #3498db;" data-color="#3498db"></div>
                    <div class="color-option" style="background-color: #2ecc71;" data-color="#2ecc71"></div>
                    <div class="color-option" style="background-color: #f1c40f;" data-color="#f1c40f"></div>
                    <div class="color-option" style="background-color: #9b59b6;" data-color="#9b59b6"></div>
                    <div class="color-option" style="background-color: #ffffff; border: 1px solid #ccc;" data-color="#ffffff"></div>
                </div>
                
                <input type="range" id="brush-size" min="1" max="50" value="3">
                <button class="tool-btn" id="clear-board">Clear Board</button>
                <button class="tool-btn" id="insert-image">Insert Image</button>
                <input type="file" id="image-upload" accept="image/*" style="display: none;">
            </div>
            
            <div class="whiteboard" id="whiteboard"></div>
            
            <div class="video-controls">
                <button class="tool-btn" id="toggle-mic">Mic</button>
                <button class="tool-btn" id="toggle-video">Video</button>
                <button class="tool-btn" id="share-screen">Share Screen</button>
                <button class="tool-btn" id="toggle-chat">Chat</button>
                <button class="tool-btn" id="start-record">Record</button>
                <button class="tool-btn" id="raise-hand">âœ‹ Raise Hand</button>
                <button class="tool-btn" id="show-reactions">Reactions</button>
            </div>
            
            <div class="emoji-picker" id="emoji-picker">
                <!-- Emojis will be added here -->
            </div>
        </div>
    </div>
    
    <div class="footer">
        <p>Mode by Ritech Railroad</p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const whiteboard = document.getElementById('whiteboard');
            const toolButtons = document.querySelectorAll('[data-tool]');
            const colorOptions = document.querySelectorAll('.color-option');
            const brushSize = document.getElementById('brush-size');
            const clearBoard = document.getElementById('clear-board');
            const insertImage = document.getElementById('insert-image');
            const imageUpload = document.getElementById('image-upload');
            const toggleMic = document.getElementById('toggle-mic');
            const toggleVideo = document.getElementById('toggle-video');
            const shareScreen = document.getElementById('share-screen');
            const toggleChat = document.getElementById('toggle-chat');
            const startRecord = document.getElementById('start-record');
            const raiseHand = document.getElementById('raise-hand');
            const showReactions = document.getElementById('show-reactions');
            const emojiPicker = document.getElementById('emoji-picker');
            
            let currentTool = 'pen';
            let currentColor = '#000000';
            let isDrawing = false;
            let lastX = 0;
            let lastY = 0;
            let drawings = [];
            let currentDrawing = null;
            let selectedElement = null;
            let offsetX, offsetY;
            
            // Initialize whiteboard with a nice background color
            whiteboard.style.backgroundColor = '#f9f9f9';
            
            // Set up tools
            toolButtons.forEach(button => {
                button.addEventListener('click', function() {
                    toolButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    currentTool = this.dataset.tool;
                    
                    // Change cursor based on tool
                    switch(currentTool) {
                        case 'pen':
                            whiteboard.style.cursor = 'crosshair';
                            break;
                        case 'eraser':
                            whiteboard.style.cursor = 'url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'24\' height=\'24\' viewBox=\'0 0 24 24\'><circle cx=\'12\' cy=\'12\' r=\'10\' fill=\'none\' stroke=\'black\' stroke-width=\'2\'/></svg>") 12 12, auto';
                            break;
                        case 'select':
                            whiteboard.style.cursor = 'default';
                            break;
                        case 'text':
                            whiteboard.style.cursor = 'text';
                            break;
                        default:
                            whiteboard.style.cursor = 'crosshair';
                    }
                });
            });
            
            // Set up color picker
            colorOptions.forEach(option => {
                option.addEventListener('click', function() {
                    colorOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    currentColor = this.dataset.color;
                });
            });
            
            // Drawing functionality
            whiteboard.addEventListener('mousedown', startDrawing);
            whiteboard.addEventListener('mousemove', draw);
            whiteboard.addEventListener('mouseup', stopDrawing);
            whiteboard.addEventListener('mouseleave', stopDrawing);
            
            function startDrawing(e) {
                if (currentTool === 'select') return;
                
                isDrawing = true;
                lastX = e.offsetX;
                lastY = e.offsetY;
                
                if (currentTool === 'pen' || currentTool === 'eraser' || currentTool === 'line') {
                    currentDrawing = document.createElement('div');
                    currentDrawing.style.position = 'absolute';
                    currentDrawing.style.left = lastX + 'px';
                    currentDrawing.style.top = lastY + 'px';
                    currentDrawing.style.width = '0';
                    currentDrawing.style.height = '0';
                    currentDrawing.style.pointerEvents = 'none';
                    
                    if (currentTool === 'pen') {
                        currentDrawing.style.borderLeft = `${brushSize.value}px solid ${currentColor}`;
                    } else if (currentTool === 'eraser') {
                        currentDrawing.style.borderLeft = `${brushSize.value * 2}px solid #f9f9f9`;
                    } else if (currentTool === 'line') {
                        currentDrawing.style.borderTop = `2px solid ${currentColor}`;
                    }
                    
                    whiteboard.appendChild(currentDrawing);
                    drawings.push(currentDrawing);
                } else if (currentTool === 'text') {
                    const textElement = document.createElement('div');
                    textElement.contentEditable = true;
                    textElement.style.position = 'absolute';
                    textElement.style.left = lastX + 'px';
                    textElement.style.top = lastY + 'px';
                    textElement.style.minWidth = '100px';
                    textElement.style.minHeight = '20px';
                    textElement.style.padding = '5px';
                    textElement.style.outline = 'none';
                    textElement.style.cursor = 'text';
                    textElement.style.color = currentColor;
                    textElement.style.fontSize = `${brushSize.value * 3}px`;
                    
                    // Make text element movable and resizable
                    makeDraggable(textElement);
                    makeResizable(textElement);
                    
                    whiteboard.appendChild(textElement);
                    textElement.focus();
                    drawings.push(textElement);
                } else if (currentTool === 'sticky-note') {
                    const stickyNote = document.createElement('div');
                    stickyNote.className = 'sticky-note';
                    stickyNote.style.left = lastX + 'px';
                    stickyNote.style.top = lastY + 'px';
                    
                    const textarea = document.createElement('textarea');
                    textarea.placeholder = 'Write your note here...';
                    stickyNote.appendChild(textarea);
                    
                    // Make sticky note movable and resizable
                    makeDraggable(stickyNote);
                    
                    whiteboard.appendChild(stickyNote);
                    textarea.focus();
                    drawings.push(stickyNote);
                } else if (currentTool === 'shape') {
                    const shape = document.createElement('div');
                    shape.style.position = 'absolute';
                    shape.style.left = lastX + 'px';
                    shape.style.top = lastY + 'px';
                    shape.style.width = '0';
                    shape.style.height = '0';
                    shape.style.backgroundColor = currentColor;
                    shape.style.borderRadius = '0';
                    
                    whiteboard.appendChild(shape);
                    currentDrawing = shape;
                    drawings.push(shape);
                }
            }
            
            function draw(e) {
                if (!isDrawing) return;
                
                const x = e.offsetX;
                const y = e.offsetY;
                
                if (currentTool === 'pen' || currentTool === 'eraser') {
                    const line = document.createElement('div');
                    line.style.position = 'absolute';
                    line.style.left = lastX + 'px';
                    line.style.top = lastY + 'px';
                    line.style.width = Math.sqrt(Math.pow(x - lastX, 2) + Math.pow(y - lastY, 2)) + 'px';
                    line.style.height = '0';
                    line.style.transformOrigin = '0 0';
                    line.style.transform = `rotate(${Math.atan2(y - lastY, x - lastX)}rad)`;
                    line.style.pointerEvents = 'none';
                    
                    if (currentTool === 'pen') {
                        line.style.borderBottom = `${brushSize.value}px solid ${currentColor}`;
                    } else {
                        line.style.borderBottom = `${brushSize.value * 2}px solid #f9f9f9`;
                    }
                    
                    whiteboard.appendChild(line);
                    drawings.push(line);
                    
                    lastX = x;
                    lastY = y;
                } else if (currentTool === 'line' && currentDrawing) {
                    const length = Math.sqrt(Math.pow(x - lastX, 2) + Math.pow(y - lastY, 2));
                    currentDrawing.style.width = length + 'px';
                    currentDrawing.style.transform = `rotate(${Math.atan2(y - lastY, x - lastX)}rad)`;
                } else if (currentTool === 'shape' && currentDrawing) {
                    const width = x - lastX;
                    const height = y - lastY;
                    
                    currentDrawing.style.width = Math.abs(width) + 'px';
                    currentDrawing.style.height = Math.abs(height) + 'px';
                    
                    if (width < 0) {
                        currentDrawing.style.left = x + 'px';
                    }
                    
                    if (height < 0) {
                        currentDrawing.style.top = y + 'px';
                    }
                }
            }
            
            function stopDrawing() {
                isDrawing = false;
                currentDrawing = null;
            }
            
            // Make elements draggable
            function makeDraggable(element) {
                element.addEventListener('mousedown', function(e) {
                    if (currentTool !== 'select') return;
                    
                    selectedElement = this;
                    offsetX = e.clientX - this.getBoundingClientRect().left;
                    offsetY = e.clientY - this.getBoundingClientRect().top;
                    
                    // Bring to front
                    this.style.zIndex = drawings.length;
                    
                    e.preventDefault();
                });
            }
            
            // Make elements resizable
            function makeResizable(element) {
                const resizeHandle = document.createElement('div');
                resizeHandle.className = 'resize-handle';
                element.appendChild(resizeHandle);
                
                resizeHandle.addEventListener('mousedown', function(e) {
                    e.stopPropagation();
                    const startX = e.clientX;
                    const startY = e.clientY;
                    const startWidth = parseInt(document.defaultView.getComputedStyle(element).width, 10);
                    const startHeight = parseInt(document.defaultView.getComputedStyle(element).height, 10);
                    
                    function doResize(e) {
                        element.style.width = (startWidth + e.clientX - startX) + 'px';
                        element.style.height = (startHeight + e.clientY - startY) + 'px';
                    }
                    
                    function stopResize() {
                        window.removeEventListener('mousemove', doResize, false);
                        window.removeEventListener('mouseup', stopResize, false);
                    }
                    
                    window.addEventListener('mousemove', doResize, false);
                    window.addEventListener('mouseup', stopResize, false);
                    
                    e.preventDefault();
                });
            }
            
            // Move elements
            document.addEventListener('mousemove', function(e) {
                if (selectedElement && currentTool === 'select') {
                    const whiteboardRect = whiteboard.getBoundingClientRect();
                    const x = e.clientX - whiteboardRect.left - offsetX;
                    const y = e.clientY - whiteboardRect.top - offsetY;
                    
                    selectedElement.style.left = Math.max(0, Math.min(x, whiteboardRect.width - selectedElement.offsetWidth)) + 'px';
                    selectedElement.style.top = Math.max(0, Math.min(y, whiteboardRect.height - selectedElement.offsetHeight)) + 'px';
                }
            });
            
            document.addEventListener('mouseup', function() {
                selectedElement = null;
            });
            
            // Clear board
            clearBoard.addEventListener('click', function() {
                if (confirm('Are you sure you want to clear the whiteboard?')) {
                    drawings.forEach(drawing => {
                        if (drawing.parentNode) {
                            drawing.parentNode.removeChild(drawing);
                        }
                    });
                    drawings = [];
                }
            });
            
            // Insert image
            insertImage.addEventListener('click', function() {
                imageUpload.click();
            });
            
            imageUpload.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        const img = new Image();
                        img.onload = function() {
                            const imgContainer = document.createElement('div');
                            imgContainer.className = 'draggable-image';
                            imgContainer.style.position = 'absolute';
                            imgContainer.style.left = '50px';
                            imgContainer.style.top = '50px';
                            imgContainer.style.width = img.width + 'px';
                            imgContainer.style.height = img.height + 'px';
                            
                            const imgElement = document.createElement('img');
                            imgElement.src = event.target.result;
                            imgContainer.appendChild(imgElement);
                            
                            // Make image draggable and resizable
                            makeDraggable(imgContainer);
                            makeResizable(imgContainer);
                            
                            whiteboard.appendChild(imgContainer);
                            drawings.push(imgContainer);
                        };
                        img.src = event.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            // Video controls
            toggleMic.addEventListener('click', function() {
                this.classList.toggle('active');
                // Implement mic toggle functionality
            });
            
            toggleVideo.addEventListener('click', function() {
                this.classList.toggle('active');
                // Implement video toggle functionality
            });
            
            shareScreen.addEventListener('click', function() {
                // Implement screen sharing functionality
            });
            
            toggleChat.addEventListener('click', function() {
                // Implement chat functionality
            });
            
            startRecord.addEventListener('click', function() {
                this.classList.toggle('active');
                // Implement recording functionality
            });
            
            raiseHand.addEventListener('click', function() {
                // Implement raise hand functionality
                alert('Hand raised! âœ‹');
            });
            
            showReactions.addEventListener('click', function(e) {
                // Show emoji picker
                emojiPicker.style.display = 'block';
                emojiPicker.style.left = e.clientX + 'px';
                emojiPicker.style.top = e.clientY + 'px';
                
                // Add some emojis
                emojiPicker.innerHTML = '';
                const emojis = ['ðŸ‘', 'ðŸ‘Ž', 'ðŸ˜Š', 'â¤ï¸', 'ðŸ˜‚', 'ðŸ˜®', 'ðŸ˜¢', 'ðŸ‘'];
                emojis.forEach(emoji => {
                    const span = document.createElement('span');
                    span.textContent = emoji;
                    span.style.fontSize = '24px';
                    span.style.cursor = 'pointer';
                    span.style.margin = '5px';
                    span.addEventListener('click', function() {
                        // Add reaction
                        alert(`You reacted with ${emoji}`);
                        emojiPicker.style.display = 'none';
                    });
                    emojiPicker.appendChild(span);
                });
            });
            
            // Close emoji picker when clicking outside
            document.addEventListener('click', function(e) {
                if (!emojiPicker.contains(e.target) && e.target !== showReactions) {
                    emojiPicker.style.display = 'none';
                }
            });
            
            // Set initial active tool
            document.querySelector('[data-tool="pen"]').classList.add('active');
        });
    </script>
</body>
</html>
